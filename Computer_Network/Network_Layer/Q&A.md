---
abbrlink: '0'
---
#### Q1.ipv4中的标识/标志/片偏移分别有什么需要注意的地方
#### Q2.ipv4中有哪些单位需要注意的
#### Q3.如何记忆A/B/C类地址
#### Q4.有哪些特殊的ip地址
#### Q5.子网掩码用来干什么/有什么用
#### Q6.什么是CIDR/特点/优点
#### Q7.为什么ARP协议工作在网络层
#### Q8.ipv4/ipv6的区别（格式）
#### Q9.RIP优缺点
#### Q10.OSPF优缺点
#### Q11.组播的产生
#### Q12.移动ip的具体实现流程
#### Q13.为什么要最长前缀匹配
#### Q14.当arp为空时，第一个以太网帧的目的MAC
#### Q15. 分片是由路由器/主机负责？
#### Q16. 为什么RIP使用UDP，OSPF使用IP，BGP使用TCP



Q1.
- 标识 占16bits 起到一个计数器的作用，每生成一个ip分组就++1，用来标识属于同一个分组的小分组（分片之后），以便目的主机能够正确的重装成原来的数据报。
- 标志 占3bits 标志字段的最低位是MF，MF=1表示后面还有分片，MF=0表示为最后一个分片，标识字段中间位是DF，只有当DF=0 时才允许分片。（只有后2bit才有意义）
- 片偏移 占13bits 指的是较长的分组在分片后，对应的某一片在原分组的相对位置，片偏移以8B为单位，即每个分片的长度一定是8B的整数倍。

Q2.
- 首部长度：占4bits，以4B为单位，故一个首部最大是 $(2^4-1)*4B=60B$ 
- 总长度：占16bits，以B为单位，故一个ip数据报最大是$(2^{15}-1)*1B=65535B$
- 片偏移：占13bits 以8B为单位，故一个ip数据报最多可以被分为(2^13-1)个

Q3.
$记忆前缀码，确定范围$
![20200924200457](https://deniffer-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200924200457.png)

Q4.
[特殊ip地址用途](https://blog.csdn.net/lizhi200404520/article/details/6699427)

Q5.
用来表达对原网络中主机号的借位！现代网络规定，所有的网络必须使用子网掩码。简单而言就是用来对IP地址进行计算，获得ip所在的子网的网络号。

Q6.
无分类域间路由选择，在变长子网掩码的基础上提出的消除传统A/B/C类网络划分，并且可以在软件的支持下实现超网构造的一种ip地址划分法。

Q7.
ARP(Address Resolution Protocol)在OSI/RM模型中被划分到数据链路层，在TCP/IP模型中被划分到了网络层，因其工作流程是通过ip数据报发送，看到了ip地址所以工作在网络层。

Q8.
-  ipv6只能在源端分片
-  由于CIDR技术，节省了路由表表项，使路由效率提高
-  简化了ip分组头，只包含8个域（ipv4有12个域） 同样提高了路由处理效率
-  更好的支持可选字段

Q9.RIP（Routing Information Protocol）
优点：
-   实现简单、开销小、收敛速度快
缺点
-   RIP限制了网络规模，最大能使用的距离为15(16代表不可达)
-   路由器之间交换的是完整的路由表，网络规模越大，开销也越大
-   网络出现故障时，会出现慢收敛的现象”坏消息传得慢“
-   每隔30秒进行一次RIP广播

Q10.OSPF（Open Shortest Path First）
优点：
-   适用于大型网络
-   可以实现负载均衡
-   每当链路变化时，才使用链路更新

Q11.
组播技术指的是单个发送者对应多个接收者的一种网络通信，组播技术中，通过向多个接收方传送单信息流方式，可以减少具有多个接收方同时收听或查看相同资源情况下的网络通信流量。D类地址范围：224.0.0.0~239.255.255.255 ，不是所有的D类都可以做组播地址。

Q12.
移动ip主要使用两个地址来记录本身（唯一的本地地址，本地代理：用来与转交地址绑定）使用传统的TCP/IP协议进行通信
- 移动节点在本地时直接用 TCP/IP通信
- 在外地网络时
    - 首先向本地代理注册当前的位置地址，也就是转交地址
    - 本地代理接受来自转交地址的注册后，在本地构建一条通向转交地址的隧道，将收到的报文通过隧道转发给移动节点所在的转交地址
    - 在转交地址处解除隧道封装，恢复原始的ip分组
    - 移动节点去到另一个外网时，只需向本地更新注册的转交地址即可
    - 回到本地时，向本地代理注销转交地址

Q13.
因为越长越精确，是前进的方向。
![20200925113436](https://deniffer-picbed.oss-cn-shenzhen.aliyuncs.com/img/20200925113436.png)

Q14.
ff:ff:ff:ff:ff：ff 广播以太网帧

Q15.
在ipv4中，由于MTU的限制，ip数据报需要进行分片处理，这个过程交给路由器进行处理。
在ipv6中，分片交给端机器执行，中间的路由器只负责转发即可，从而大大提高了路由器的效率
[解释1](https://blog.csdn.net/u011784495/article/details/71715555)
[解释2](https://blog.csdn.net/dog250/article/details/88308917)

Q16.
OSPF本身提供主从协商机制，可以保证可靠的传输，另外全网路由器保持着同样的一个LSDB（链路状态数据库），当拓扑发生变化时，需要携带的变更信息较少，通过IP协议即可完成
RIP协议采用UDP是因为RIP每周期需全网组播路由信息，路由信息数目较大，故使用UDP协议可以提高效率
BGP为边界网关协议，因携带的路由信息较多，且可能跨不同网络传送路由信息，为保证可靠性，需使用TCP协议，可兼顾容量和可靠性
